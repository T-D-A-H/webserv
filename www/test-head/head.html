<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>HEAD Request Test</title>
	<link rel="stylesheet" href="../styles.css">
	<script>
		async function sendHeadRequest() {

			const fileInputRaw = document.getElementById('fileInput').value.trim();
			const output = document.getElementById('output');
			output.textContent = '';

			if (!fileInputRaw) {
				output.textContent = 'Please enter a file path.';
				return;
			}
            let fileInput = fileInputRaw;
	        if (!fileInput.startsWith('../')) {
		        fileInput = '../' + fileInput;
	        }
            try {
        	    const response = await fetch(fileInput, {
        		    method: 'HEAD',
        		    redirect: 'manual'
        	});
        
        	let headers = '';
        	for (const [key, value] of response.headers.entries())
        		headers += key + ': ' + value + '\n';
        	output.textContent = 'Status: ' + response.status + ' ' + response.statusText + '\n\n' + headers;
            } catch (err) {
        	    output.textContent = 'Error: ' + err;
            }
	    }
	</script>
</head>
<body>
	<header class="top-bar">
		<a href="../index.html" class="back-button">← Back</a>
		<h1 class="title">HEAD Request Test</h1>
	</header>

	<main class="container">
		<h2>Test HEAD Command</h2>
		<input id="fileInput" type="text" placeholder="/path/to/file" style="width: 90%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; font-size: 16px;">
		<div class="buttons">
			<button onclick="sendHeadRequest()">Send HEAD Request</button>
		</div>
		<pre id="output" style="text-align: left; background: #f8f8f8; border-radius: 10px; padding: 15px; margin-top: 20px; white-space: pre-wrap; word-break: break-word;"></pre>
	</main>
	<script>
        // Función para leer cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Aplicar cookie "color" al fondo
        const color = getCookie("color");
        if (color) {
            document.body.style.backgroundColor = color;
        }
    </script>
</body>
</html>
